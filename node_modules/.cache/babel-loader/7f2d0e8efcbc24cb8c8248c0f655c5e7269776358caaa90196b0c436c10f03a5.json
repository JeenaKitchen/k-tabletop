{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import'./ThemeBackground.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ThemeBackground=_ref=>{let{background,video}=_ref;const[isVideoLoaded,setIsVideoLoaded]=useState(false);const[isVideoPlaying,setIsVideoPlaying]=useState(false);const videoRef=useRef(null);// Reset state when video prop changes (theme switch)\nuseEffect(()=>{console.log('ThemeBackground: video prop changed:',video);setIsVideoLoaded(false);setIsVideoPlaying(false);},[video]);useEffect(()=>{if(videoRef.current&&video){const videoElement=videoRef.current;const handleLoadedData=()=>{console.log('Video loaded successfully:',video);setIsVideoLoaded(true);setIsVideoPlaying(true);};const handleCanPlay=()=>{console.log('Video can play, attempting to start playback:',video);videoElement.play().catch(error=>{console.error('Failed to play video:',error);setIsVideoPlaying(false);});};const handleError=error=>{console.error('Video error:',error);setIsVideoPlaying(false);};videoElement.addEventListener('loadeddata',handleLoadedData);videoElement.addEventListener('canplay',handleCanPlay);videoElement.addEventListener('error',handleError);return()=>{videoElement.removeEventListener('loadeddata',handleLoadedData);videoElement.removeEventListener('canplay',handleCanPlay);videoElement.removeEventListener('error',handleError);};}},[video]);return/*#__PURE__*/_jsxs(\"div\",{className:\"theme-background\",children:[video&&/*#__PURE__*/_jsxs(\"video\",{// Force re-render when video changes\nref:videoRef,className:`theme-video ${isVideoLoaded?'loaded':''}`,autoPlay:true,muted:true,loop:true,playsInline:true,poster:background,children:[/*#__PURE__*/_jsx(\"source\",{src:video,type:\"video/mp4\"}),/*#__PURE__*/_jsx(\"img\",{src:background,alt:\"theme background\"})]},video),(!video||!isVideoPlaying)&&/*#__PURE__*/_jsx(\"div\",{className:\"theme-background-image\",style:{backgroundImage:`url(${background})`}})]});};export default ThemeBackground;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","ThemeBackground","_ref","background","video","isVideoLoaded","setIsVideoLoaded","isVideoPlaying","setIsVideoPlaying","videoRef","console","log","current","videoElement","handleLoadedData","handleCanPlay","play","catch","error","handleError","addEventListener","removeEventListener","className","children","ref","autoPlay","muted","loop","playsInline","poster","src","type","alt","style","backgroundImage"],"sources":["/Users/eunjinjeong/Desktop/cursor project/k-tabletop/src/components/ThemeBackground.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './ThemeBackground.css';\n\nconst ThemeBackground = ({ background, video }) => {\n  const [isVideoLoaded, setIsVideoLoaded] = useState(false);\n  const [isVideoPlaying, setIsVideoPlaying] = useState(false);\n  const videoRef = useRef(null);\n\n  // Reset state when video prop changes (theme switch)\n  useEffect(() => {\n    console.log('ThemeBackground: video prop changed:', video);\n    setIsVideoLoaded(false);\n    setIsVideoPlaying(false);\n  }, [video]);\n\n  useEffect(() => {\n    if (videoRef.current && video) {\n      const videoElement = videoRef.current;\n      \n      const handleLoadedData = () => {\n        console.log('Video loaded successfully:', video);\n        setIsVideoLoaded(true);\n        setIsVideoPlaying(true);\n      };\n      \n      const handleCanPlay = () => {\n        console.log('Video can play, attempting to start playback:', video);\n        videoElement.play().catch((error) => {\n          console.error('Failed to play video:', error);\n          setIsVideoPlaying(false);\n        });\n      };\n\n      const handleError = (error) => {\n        console.error('Video error:', error);\n        setIsVideoPlaying(false);\n      };\n\n      videoElement.addEventListener('loadeddata', handleLoadedData);\n      videoElement.addEventListener('canplay', handleCanPlay);\n      videoElement.addEventListener('error', handleError);\n      \n      return () => {\n        videoElement.removeEventListener('loadeddata', handleLoadedData);\n        videoElement.removeEventListener('canplay', handleCanPlay);\n        videoElement.removeEventListener('error', handleError);\n      };\n    }\n  }, [video]);\n\n  return (\n    <div className=\"theme-background\">\n      {video && (\n        <video \n          key={video} // Force re-render when video changes\n          ref={videoRef}\n          className={`theme-video ${isVideoLoaded ? 'loaded' : ''}`}\n          autoPlay \n          muted \n          loop \n          playsInline\n          poster={background}\n        >\n          <source src={video} type=\"video/mp4\" />\n          <img src={background} alt=\"theme background\" />\n        </video>\n      )}\n      \n      {(!video || !isVideoPlaying) && (\n        <div \n          className=\"theme-background-image\" \n          style={{ backgroundImage: `url(${background})` }} \n        />\n      )}\n    </div>\n  );\n};\n\nexport default ThemeBackground; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}